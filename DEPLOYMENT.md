# éƒ¨ç½²è¯´æ˜

## å­ç›®å½•éƒ¨ç½²ä¼˜åŒ– âœ… å·²ä¿®å¤è®¿é—®é—®é¢˜

é¡¹ç›®å·²ç»é…ç½®ä¸ºæ”¯æŒåœ¨ç½‘ç«™å­ç›®å½•ä¸­è¿è¡Œï¼Œå¹¶ä¿®å¤äº†è·¯ç”±è®¿é—®é—®é¢˜ï¼š

### 1. é…ç½®ä¼˜åŒ–
- **ç›¸å¯¹è·¯å¾„**: è®¾ç½® `base: './'`ï¼Œæ‰€æœ‰èµ„æºä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨
- **è·¯ç”±ä¿®å¤**: React Router è‡ªåŠ¨æ£€æµ‹å­ç›®å½•è·¯å¾„ï¼Œè®¾ç½®æ­£ç¡®çš„ basename
- **èµ„æºåˆ†åŒ…**: å°†ä»£ç åˆ†ä¸º vendorã€ui å’Œä¸»åº”ç”¨ä¸‰ä¸ªåŒ…ï¼Œä¼˜åŒ–åŠ è½½æ€§èƒ½
- **å‹ç¼©ä¼˜åŒ–**: å¯ç”¨ terser å‹ç¼©ï¼Œç§»é™¤ console å’Œ debugger
- **æ–‡ä»¶å‘½å**: ä½¿ç”¨ hash å‘½åï¼Œæ”¯æŒç¼“å­˜ç­–ç•¥

### 2. æ‰“åŒ…ç»“æœ
```
dist/
â”œâ”€â”€ index.html          (612 bytes)
â”œâ”€â”€ vite.svg           (1.5 KB)
â””â”€â”€ assets/
    â”œâ”€â”€ index-07365cc6.css     (26.7 KB)
    â”œâ”€â”€ vendor-6af34bce.js     (159.3 KB) - React æ ¸å¿ƒåº“ + è·¯ç”±
    â”œâ”€â”€ ui-69a62606.js         (21.9 KB)  - UI ç»„ä»¶åº“
    â””â”€â”€ index-b87c75e1.js      (83.6 KB)  - ä¸»åº”ç”¨ä»£ç 
```

### ğŸ”§ ä¿®å¤çš„é—®é¢˜
- **è·¯ç”±é—®é¢˜**: ä¿®å¤äº† React Router åœ¨å­ç›®å½•ä¸­æ— æ³•æ­£ç¡®å·¥ä½œçš„é—®é¢˜
- **è‡ªåŠ¨æ£€æµ‹**: åº”ç”¨ä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰éƒ¨ç½²è·¯å¾„å¹¶è®¾ç½®æ­£ç¡®çš„è·¯ç”±åŸºç¡€è·¯å¾„
- **å…¼å®¹æ€§**: æ”¯æŒå„ç§å­ç›®å½•éƒ¨ç½²åœºæ™¯

### 3. éƒ¨ç½²æ–¹å¼

#### æ–¹å¼ä¸€ï¼šç›´æ¥éƒ¨ç½²åˆ°å­ç›®å½•
å°† `dist` æ–‡ä»¶å¤¹å†…å®¹å¤åˆ¶åˆ°æœåŠ¡å™¨çš„å­ç›®å½•ä¸­ï¼Œä¾‹å¦‚ï¼š
```
https://yourdomain.com/film-decoder/
```

#### æ–¹å¼äºŒï¼šè‡ªå®šä¹‰å­ç›®å½•è·¯å¾„
å¦‚æœéœ€è¦éƒ¨ç½²åˆ°ç‰¹å®šå­ç›®å½•ï¼Œä¿®æ”¹ `vite.config.ts` ä¸­çš„ `base` é…ç½®ï¼š
```typescript
// ä¾‹å¦‚éƒ¨ç½²åˆ° /tools/film-decoder/
base: '/tools/film-decoder/',
```

### 4. æœåŠ¡å™¨é…ç½®å»ºè®®

#### Nginx é…ç½®ç¤ºä¾‹
```nginx
location /film-decoder/ {
    alias /path/to/your/dist/;
    try_files $uri $uri/ /film-decoder/index.html;
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### Apache é…ç½®ç¤ºä¾‹
```apache
<Directory "/path/to/your/dist">
    RewriteEngine On
    RewriteBase /film-decoder/
    RewriteRule ^index\.html$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /film-decoder/index.html [L]
    
    # é™æ€èµ„æºç¼“å­˜
    <FilesMatch "\.(js|css|png|jpg|jpeg|gif|ico|svg)$">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
    </FilesMatch>
</Directory>
```

### 5. éªŒè¯éƒ¨ç½²
éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹ URL éªŒè¯ï¼š
- ä¸»é¡µé¢: `https://yourdomain.com/your-subdirectory/`
- é™æ€èµ„æº: `https://yourdomain.com/your-subdirectory/assets/`

### 6. æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§
- âœ… ä»£ç åˆ†å‰² (Code Splitting)
- âœ… èµ„æºå‹ç¼© (Minification)
- âœ… ç›¸å¯¹è·¯å¾„å¼•ç”¨
- âœ… ç¼“å­˜å‹å¥½çš„æ–‡ä»¶å‘½å
- âœ… ç”Ÿäº§ç¯å¢ƒä¼˜åŒ– (ç§»é™¤ console)

### 7. æ•…éšœæ’é™¤

#### é—®é¢˜ï¼šé¡µé¢æ˜¾ç¤ºç©ºç™½æˆ–ä¸æ˜¾ç¤ºå†…å®¹
**åŸå› **: React Router è·¯ç”±é…ç½®é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**: 
- ç¡®ä¿è®¿é—®çš„æ˜¯ `index.html` æ–‡ä»¶
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯
- ç¡®ä¿æœåŠ¡å™¨æ”¯æŒ SPA è·¯ç”±é‡å†™

#### é—®é¢˜ï¼šèµ„æºæ–‡ä»¶ 404 é”™è¯¯
**åŸå› **: ç›¸å¯¹è·¯å¾„è§£æé—®é¢˜
**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¦‚æœä½¿ç”¨ç»å¯¹è·¯å¾„éƒ¨ç½²ï¼Œåˆ›å»º .env æ–‡ä»¶
echo "VITE_BASE_PATH=/your-subdirectory/" > .env
npm run build
```

#### é—®é¢˜ï¼šè·¯ç”±è·³è½¬ä¸å·¥ä½œ
**åŸå› **: æœåŠ¡å™¨æ²¡æœ‰é…ç½® SPA é‡å†™è§„åˆ™
**è§£å†³æ–¹æ¡ˆ**: å‚è€ƒä¸Šé¢çš„ Nginx/Apache é…ç½®

### 8. ç¯å¢ƒå˜é‡é…ç½®
å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶æ ¹æ®éœ€è¦ä¿®æ”¹ï¼š
```bash
cp .env.example .env
```

### 9. é‡æ–°æ‰“åŒ…å‘½ä»¤
```bash
npm run build
```

æ‰“åŒ…å®Œæˆåï¼Œ`dist` ç›®å½•å³å¯ç›´æ¥éƒ¨ç½²åˆ°ä»»ä½•å­ç›®å½•ä¸­ã€‚

### 10. éªŒè¯éƒ¨ç½²æˆåŠŸ
1. è®¿é—® `https://yourdomain.com/your-subdirectory/`
2. æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
3. æµ‹è¯•è·¯ç”±è·³è½¬æ˜¯å¦å·¥ä½œ
4. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æ˜¯å¦æœ‰é”™è¯¯